{% extends 'layout.html.twig' %}

{% block content_title %}
    Manage all your sensors here
{% endblock %}
{% block content %}
    <div class="jumbotron">
        <a class="btn btn-primary" href="{{ path(route ~ '_add') }}">Add new Sensor</a>
        <br>
        <table class="table table-stripped">
            <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">UUID</th>
                <th scope="col">Room</th>
                <th scope="col">Floor</th>
                <th scope="col">Value type</th>
                <th scope="col">Switchable</th>
                <th scope="col">Created at</th>
                <th scope="col">IP</th>
                <th scope="col">Active</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for key, entity in entities %}
                <tr>
                    <td>{{ entity.id }}</td>
                    <td>{{ entity.uuid }}</td>
                    <td>{{ entity.room.room }}</td>
                    <td>{{ entity.room.floor }}</td>
                    <td>{{ entity.valueType }}</td>
                    <td>{{ entity.switchable }}</td>
                    <td>{{ entity.createdAt | date('Y-m-d H:i:s') }}</td>
                    <td>{{ entity.sensorIp }}</td>
                    <td>{{ entity.active }}</td>
                    <td>
                        {#{{ if entity.switchable == true }}#}
                        <a class="btn btn-info" href="{{ path('publish_test', {'topic' : entity.uuid, 'payload' : 1}) }}">Send test payload</a>
                        {#{% endif %}#}
                        <a class="btn btn-info" href="{{ path(route ~ '_edit', {'id' : entity.id}) }}">Edit</a>
                        <a class="btn btn-danger" href="{{ path(route ~ '_delete', {'id' : entity.id}) }}">Delete</a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}